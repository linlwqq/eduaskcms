/*! lightense-images v1.0.0 | Â© Tunghsiao Liu | MIT */
var Lightense=function(){"use strict";function e(e){var n=e.length;if(n)for(var i=0;n>i;i++)t(e[i]);else t(e)}function t(e){var t=e.getAttribute("data-image")||e.src;t&&(e.classList.add("lightense-target"),e.addEventListener("click",function(e){return e.metaKey||e.ctrlKey?p.open(t,"_blank"):void c(this)},!1))}function n(){var e="\n      .lightense-backdrop {\n        box-sizing: border-box;\n        width: 100%;\n        height: 100%;\n        position: fixed;\n        top: 0;\n        left: 0;\n        overflow: hidden;\n        z-index: "+(h.zIndex-1)+";\n        padding: 0;\n        margin: 0;\n        transition: opacity "+h.time+"ms ease;\n        cursor: zoom-out;\n        opacity: 0;\n        background-color: rgba(255, 255, 255, .98);\n        visibility: hidden;\n      }\n\n      @supports (-webkit-backdrop-filter: blur(30px)) {\n        .lightense-backdrop {\n          background-color: rgba(255, 255, 255, .6);\n          -webkit-backdrop-filter: blur(30px);\n          backdrop-filter: blur(30px);\n        }\n      }\n\n      .lightense-wrap {\n        position: relative;\n        transition: transform "+h.time+"ms "+h.cubicBezier+";\n        z-index: "+h.zIndex+";\n        -webkit-user-select: none;\n        user-select: none;\n      }\n\n      .lightense-target {\n        cursor: zoom-in;\n        transition: transform "+h.time+"ms "+h.cubicBezier+";\n      }\n\n      .lightense-open {\n        cursor: zoom-out;\n      }\n\n      .lightense-transitioning {\n        pointer-events: none;\n      }\n    ",t=m.head||m.getElementsByTagName("head")[0],n=m.createElement("style");n.styleSheet?n.styleSheet.cssText=e:n.appendChild(m.createTextNode(e)),t.appendChild(n)}function i(){h.container=m.createElement("div"),h.container.className="lightense-backdrop",m.body.appendChild(h.container)}function r(e){var t=e.width,n=e.height,i=p.pageYOffset||m.documentElement.scrollTop||0,r=p.pageXOffset||m.documentElement.scrollLeft||0,a=h.target.getBoundingClientRect(),o=t/a.width,s=p.innerWidth||m.documentElement.clientWidth||0,c=p.innerHeight||m.documentElement.clientHeight||0,l=s-h.padding,d=c-h.padding,g=t/n,u=l/d;l>t&&d>n?h.scaleFactor=o:u>g?h.scaleFactor=d/n*o:h.scaleFactor=l/t*o;var f=s/2,b=i+c/2,v=a.left+r+a.width/2,y=a.top+i+a.height/2;h.translateX=f-v,h.translateY=b-y}function a(){h.target.classList.add("lightense-open"),h.wrap=m.createElement("div"),h.wrap.className="lightense-wrap",setTimeout(function(){h.target.style.transform="scale("+h.scaleFactor+")"}),h.target.parentNode.insertBefore(h.wrap,h.target),h.wrap.appendChild(h.target),setTimeout(function(){h.wrap.style.transform="translate3d("+h.translateX+"px, "+h.translateY+"px, 0)"}),h.background&&(h.container.style.backgroundColor=h.background),h.container.style.visibility="visible",setTimeout(function(){h.container.style.opacity="1"})}function o(){d(),h.target.classList.remove("lightense-open"),h.wrap.style.transform="",h.target.style.transform="",h.target.classList.add("lightense-transitioning"),h.container.style.opacity="",setTimeout(function(){h.container.style.visibility="",h.container.style.backgroundColor="",h.wrap.parentNode.replaceChild(h.target,h.wrap),h.target.classList.remove("lightense-transitioning")},h.time)}function s(){var e=Math.abs(h.scrollY-p.scrollY);e>=30&&o()}function c(e){if(h.target=e,h.target.classList.contains("lightense-open"))return o();h.scrollY=p.scrollY,h.src=e.getAttribute("data-image")||e.src,h.background=h.target.getAttribute("data-background")||!1;var t=new Image;t.onload=function(){r(this),a(),l()},t.src=h.src}function l(){p.addEventListener("keyup",g,!1),p.addEventListener("scroll",s,!1),h.container.addEventListener("click",o,!1)}function d(){p.removeEventListener("keyup",g,!1),p.removeEventListener("scroll",s,!1),h.container.removeEventListener("click",o,!1)}function g(e){e.preventDefault(),27===e.keyCode&&o()}function u(t,r){if(!t)throw"You need to pass an element!";var a=r||{};a.time&&(h.time=a.time),n(),i(),e(t)}var p=window,m=document,h={time:300,padding:40,cubicBezier:"cubic-bezier(.2, 0, .1, 1)",zIndex:2147483647};return u}();